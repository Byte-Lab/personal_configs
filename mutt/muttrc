#
# The main .muttrc file.
#
# Taken in part from
# https://gitlab.com/muttmua/mutt/-/blob/master/contrib/sample.muttrc-starter.
#

###############
# Identity
#
# Alternate addresses:
set realname = "David Vernet"
set from = "void@manifault.com"
alternates "dcvernet@gmail.com"
alternates "@davidvernet\.com$"
alternates "@manifault\.com$"

source "$HOME/.personal_configs/mutt/manifault.rc"

set reverse_name

# Automatically pull all mailboxes from IMAP.
set imap_check_subscribed

set folder = imaps://imap.gmail.com/
set spoolfile = "+INBOX"
unset record                # Gmail auto-stores in "+[Gmail].Sent Mail"
unset trash                 # Unset, deletion will remove labels
set mail_check = 30

###############
# Pager settings
#
ignore *
unignore From Message-ID Date To Cc Bcc Subject

set pager_stop
unset markers

# Prefer plain text to html.
# However, for brain dead clients that bundle attachments inside a
# multipart/alternative, prefer that alternative.
alternative_order multipart/mixed multipart/related text/plain

# Consult mime.types for determining types of these attachments
mime_lookup application/octet-stream

# This requires a ~/.mailcap entry with the copiousoutput flag, such as:
# text/html; lynx -dump -width ${COLUMNS:-80} %s; nametemplate=%s.html; copiousoutput
auto_view text/html

###############
# Index settings
#
set quit = ask-yes
set sort = threads

# Remember to `mkdir -p ~/.mutt/hcache` first:
set header_cache= "~/.mutt/hcache"

###############
# Message composition settings
#
set edit_headers

# Obviously
set editor = "vim"

set mime_type_query_command = "xdg-mime query filetype"

# msmtp is a solid SMTP client.
# mutt also has built-in SMTP, or you can use an MTA like exim4 or postfix.
set sendmail = "/usr/bin/msmtp"

# lbdb is a versatile contact query tool.
# Invoke via ctrl-t in an address prompt
set query_command = "/usr/bin/lbdbq"
